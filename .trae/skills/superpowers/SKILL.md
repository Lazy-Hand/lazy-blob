---
name: superpowers
description: 基于 obra/superpowers 的代理式开发工作流框架，提供完整的软件开发方法论
---

# Superpowers 开发工作流 Skill

> 基于 [obra/superpowers](https://github.com/obra/superpowers) 移植到 Cursor

## 触发条件

当用户开始新功能开发、需要系统性地构建功能时，自动激活此 skill。

---

## 核心理念

1. **测试驱动开发 (TDD)** - 先写测试，永远先写测试
2. **系统化优于临时方案** - 流程优于猜测
3. **降低复杂度** - 简洁是首要目标
4. **证据优于声明** - 验证后再宣告成功

---

## 基本工作流程

### 1️⃣ 头脑风暴 (Brainstorming)

**触发时机**: 在写代码之前

**行为规范**:

- ❌ **不要** 直接跳进代码编写
- ✅ **要** 退后一步，问用户真正想做什么
- ✅ 通过问题细化粗略想法
- ✅ 探索替代方案
- ✅ 分段展示设计，便于验证
- ✅ 保存设计文档

**输出**: 设计文档 (存储在 `docs/designs/` 或 `openspec/specs/`)

### 2️⃣ 创建工作分支 (Using Git Worktrees)

**触发时机**: 设计批准后

**行为规范**:

- 创建隔离的工作空间
- 新建分支进行开发
- 运行项目设置
- 验证测试基线正常

### 3️⃣ 编写计划 (Writing Plans)

**触发时机**: 设计批准后

**行为规范**:

- 将工作分解为小任务（每个 2-5 分钟）
- 每个任务包含：
  - 精确的文件路径
  - 完整的代码
  - 验证步骤

**输出**: 实施计划文档

### 4️⃣ 执行计划 (Executing Plans)

**触发时机**: 计划编写完成后

**行为规范**:

- 按任务执行，分批进行
- 每批次完成后设置检查点
- 进行两阶段审查：
  1. 规范符合性检查
  2. 代码质量检查

### 5️⃣ 测试驱动开发 (Test-Driven Development)

**触发时机**: 实施过程中

**行为规范 - RED-GREEN-REFACTOR 循环**:

```
1. RED   - 写一个失败的测试
2. GREEN - 写最少的代码让测试通过
3. REFACTOR - 重构代码，保持测试通过
4. COMMIT - 提交代码
```

**关键规则**:

- ❌ 禁止在写测试之前写业务代码
- ❌ 禁止跳过"看测试失败"的步骤
- ✅ 先写测试，看它失败，再写代码

### 6️⃣ 代码审查 (Code Review)

**触发时机**: 任务之间

**行为规范**:

- 对照计划审查代码
- 按严重程度报告问题
- 关键问题阻止进度

### 7️⃣ 完成开发分支 (Finishing Branch)

**触发时机**: 所有任务完成后

**行为规范**:

- 验证所有测试通过
- 提供选项：合并/PR/保留/放弃
- 清理工作树

---

## 系统调试技能 (Systematic Debugging)

当遇到 bug 时，使用 4 阶段根因分析流程：

### 阶段 1: 复现

```markdown
- 确认问题可以稳定复现
- 记录复现步骤
- 确定最小复现案例
```

### 阶段 2: 定位

```markdown
- 使用二分法缩小范围
- 添加日志/断点追踪
- 分析数据流
```

### 阶段 3: 分析

```markdown
- 找到根本原因（不是表面症状）
- 理解为什么会发生
- 评估影响范围
```

### 阶段 4: 修复

```markdown
- 编写测试复现问题
- 实施最小修复
- 验证修复有效
- 确保没有引入新问题
```

---

## 计划文档格式

```markdown
# 实施计划: [功能名称]

## 概述

[简要描述]

## 任务列表

### 任务 1: [任务名称]

- **文件**: `path/to/file.js`
- **预计时间**: 2-5 分钟
- **步骤**:
  1. [具体步骤]
  2. [具体步骤]
- **验证**:
  - [ ] 测试通过
  - [ ] 代码审查

### 任务 2: [任务名称]

...
```

---

## 设计文档格式

```markdown
# 设计文档: [功能名称]

## 问题陈述

[要解决什么问题]

## 目标

- [目标 1]
- [目标 2]

## 非目标

- [不做什么]

## 方案

### 方案 1: [名称]

**优点**: ... **缺点**: ...

### 方案 2: [名称]

**优点**: ... **缺点**: ...

## 推荐方案

[选择哪个方案及原因]

## 实施概要

[高层次实施步骤]
```

---

## 使用示例

### 示例 1: 开始新功能

**用户**: 我想添加一个用户评论功能

**AI 行为**:

1. **不直接写代码**，而是先问问题：
   - 评论是针对什么的？（文章/产品/用户）
   - 需要支持嵌套回复吗？
   - 需要审核功能吗？
   - 评论者需要登录吗？

2. 根据回答生成设计文档
3. 分段展示设计，等待确认
4. 设计确认后，生成实施计划
5. 按计划执行，使用 TDD

### 示例 2: 修复 Bug

**用户**: 这个功能有 bug，点击没反应

**AI 行为**:

1. **不直接猜测修复**，而是：
   - 确认复现步骤
   - 添加日志定位问题
   - 分析根本原因
   - 写测试复现 bug
   - 实施修复
   - 验证修复

---

## 与其他 Skill 配合

| Skill                | 配合方式                                |
| -------------------- | --------------------------------------- |
| `vue-page-generator` | 在设计确认后，使用此 skill 生成页面代码 |
| `openspec`           | 使用 OpenSpec 管理设计文档和规范        |

---

## 快捷命令

| 命令                        | 说明             |
| --------------------------- | ---------------- |
| `/superpowers:brainstorm`   | 启动头脑风暴会话 |
| `/superpowers:write-plan`   | 创建实施计划     |
| `/superpowers:execute-plan` | 执行计划         |
| `/superpowers:debug`        | 启动系统调试流程 |

---

## 参考链接

- [superpowers GitHub](https://github.com/obra/superpowers)
- [Superpowers for Claude Code](https://github.com/obra/superpowers/blob/main/docs/README.md)